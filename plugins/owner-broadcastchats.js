import fs from 'fs';
const handler = async (m, {conn, text} ) => {
const chats = Object.entries(conn.chats).filter(([jid, chat]) => !jid.endsWith('@g.us') && chat.isChats).map((v) => v[0]);
if (!text) throw '*âš ï¸ ðˆð§ð ð«ðžð¬ðž ðžð¥ ð¦ðžð§ð¬ðšð£ðž ðªð®ðž ðªð®ð¢ðžð«ðž ð­ð«ðšð¦ð¢ð­ðž*'
const cc = text ? m : m.quoted ? await m.getQuotedObj() : false || m;
const teks = text ? text : cc.text;
for (const i of chats) {
await delay(500);
conn.sendMessage(i, { text: `âœ… *COMUNICADO OFICIAL* âœ…\n\n` + teks, mentions: [m.sender], mentions: (await conn.groupMetadata(id)).participants.map(v => v.id) }, { quoted: fkontak })}
m.reply(`*[â—ðˆðð…ðŽâ—] ð™¼ð™´ð™½ðš‚ð™°ð™¹ð™´ ð™´ð™½ðš…ð™¸ð™°ð™³ð™¾ ð™° ${chats.length} ð™²ð™·ð™°ðšƒðš‚ ð™¿ðšð™¸ðš…ð™°ð™³ð™¾ðš‚*\n\n*ððŽð“ð€: ð™´ðš‚ ð™¿ð™¾ðš‚ð™¸ð™±ð™»ð™´ ðš€ðš„ð™´ ðšƒð™´ð™½ð™¶ð™° ð™µð™°ð™»ð™»ð™¾ðš‚ ð™´ðš‚ðšƒð™´ ð™²ð™¾ð™¼ð™°ð™½ð™³ð™¾ ðšˆ ð™½ð™¾ ðš‚ð™´ ð™´ð™½ðš…ð™¸ð™´ ð™° ðšƒð™¾ð™³ð™¾ðš‚ ð™»ð™¾ðš‚ ð™²ð™·ð™°ðšƒðš‚, ð™³ð™¸ðš‚ð™²ðš„ð™»ð™¿ð™´ ð™¿ð™¾ðš ð™´ð™» ð™¼ð™¾ð™¼ð™´ð™½ðšƒð™¾*`)};
handler.help = ['broadcastchats', 'bcchats'].map((v) => v + ' <teks>');
handler.tags = ['owner'];
handler.command = /^(broadcastchats?|bcc(hats?)?)$/i;
handler.rowner = true;
export default handler;

const delay = (time) => new Promise((res) => setTimeout(res, time));